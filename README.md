# live2audio

AUTHOR'S NOTE: this project was vibe-coded, mostly to see if it's possible. The below readme is also mostly generated by ChatGPT, formatted by hand. I make no guarantees that this works or that there isn't some catostrophic security bug. If there is, please file an issue (or maybe even a pull request).

## Features

- Ingest YouTube livestreams (or videos) using yt-dlp.

- Stream audio-only via Icecast.

- Simple HTTP API to control streaming (start, stop).

- Healthchecks for both services.

- Optional automated container updates via Watchtower.

## Quickstart

### Clone the Repository

`git clone https://github.com/thinkaliker/live2audio.git`

`cd live2audio`

### Pull images

`docker compose pull`

### Start Using Docker Compose

`docker compose up`

## Access the Services

Service	URLs

| Description         | URL                          |
|---------------------|------------------------------|
| Icecast Server      | http://your-server-ip:8000   |
| Stream Controller   | http://your-server-ip:5000   |

## HTTP Control API

### Start Streaming

`GET /control?action=start&stream=YOUTUBE_URL`

#### Example

`curl "http://localhost:5000/control?action=start&stream=https://www.youtube.com/watch?v=YOUR_VIDEO_ID"`

### Stop Streaming

`GET /control?action=stop`

#### Example

`curl "http://localhost:5000/control?action=stop"`

## Environment Variables

| Variable    | Default                                        | Description                    |
|-------------|------------------------------------------------|--------------------------------|
| ICECAST_URL | `icecast://source:hackme@localhost:8000/stream`  | URL used to stream to icecast  |

## Updating Services

Watchtower should automatically check for updates. You can manually update with:

`docker compose pull`
`docker compose up --force-recreate`
